# 0020.table-display

## Background

Displaying tabular data is a core notebook capability. Currently, when code executes and returns a pandas `DataFrame`, the data is printed as plain text, which is hard to read and limits usability for larger datasets. A dedicated table renderer will improve readability, allow horizontal scrolling for many columns, and prevent performance issues by limiting the number of rendered rows.

## User Story

> **As a** data analyst working in the notebook  
> **I want** the `display()` function to render DataFrame results as an interactive, scrollable HTML table  
> **So that** I can easily inspect tabular data without leaving the notebook context.

## Acceptance Criteria

1. When a cell executes Python code that calls `display(df)` where `df` is a pandas `DataFrame`, the worker converts the DataFrame to JSON (including column names and row data) and posts a dedicated **"table"** message to the frontend.
2. The frontend renders the table **after** any standard stdout/stderr text output from the same cell, preserving execution order.
3. Only the **first 50 rows** are rendered. If the DataFrame contains more than 50 rows, a caption above the table reads: `showing first 50 of <TOTAL_ROWS> rows`.
4. If the table width exceeds the viewport (many columns), the table container becomes horizontally **scrollable** while preserving column headers.
5. Styling matches existing notebook aesthetics and uses Tailwind CSS utilities; no additional external table libraries are introduced.
6. Feature works in both collapsed and expanded cell states without breaking existing layout.
7. Implementation passes all existing and new unit/integration tests, ESLint, and TypeScript checks.
8. Each cell could display() multiple graphs, all of them should be displayed

## Technical Notes (optional)

- Worker side: use `df.head(50).to_json(orient="split")` to capture up to 50 rows with column order preserved.
- Define a new message type `{ type: "table", id: <cellId>, payload: { columns: [...], data: [...], totalRows: N } }`.
- Frontend: create a reusable `TableDisplay` component under `src/components` leveraging `<table>` with `overflow-x-auto` wrapper.
- Consider memoising large JSON payload parsing to avoid re-renders.
  q

## Out of Scope (optional)

- Interactive features such as sorting, filtering, or pagination beyond the 50-row preview.

## Potential Pitfalls (optional)

- Very wide tables can still impact performance; ensure virtualised rendering is considered if performance degrades.
- Large DataFrames (millions of rows) should not be serialised entirelyâ€”send only the required preview rows.

## Definition of Done

- All acceptance criteria are met
- Unit / integration tests pass
- Lint & type-check succeed
- README is updated under **Implemented user-stories** with a summary of this feature
