# 0022.describe-snowflake-table-tool

## Background

The AI assistant can execute arbitrary SQL queries but lacks a dedicated way to quickly inspect table schemas. Providing a specialised tool to describe Snowflake tables will streamline analytics workflows and reduce manual typing, letting users understand column definitions faster.

## User Story

> **As a** data analyst  
> **I want** the AI to describe a Snowflake table via a dedicated function  
> **So that** I can immediately see the table structure and data types without crafting the SQL myself

## Acceptance Criteria

1. A new AI tool `describeSnowflakeTable(table)` is available to the assistant. Make sure the tool is included in the AI SDK frontend implementation and that the tool call is invoked in `onToolCall` in frontend.
2. The `table` argument is required and matches the `database.schema.table` pattern; invalid formats return a clear validation error.
3. The tool uses the SnowflakeService with SQL `"describe table <table>"` to query the table structure.
4. The implementation reuses the existing SnowflakeService for making the API call, avoiding duplicated logic for access-token and hostname handling.
5. On success, the tool returns the result set from Snowflake and renders it as a markdown table in the conversation flow.
6. Comprehensive unit tests cover successful calls, validation failures, and service error propagation.
7. All lint, type-check, and existing test suites pass.

## Technical Notes (optional)

- Implement in `src/ai-functions/describe-snowflake-table.ts` following the existing pattern for AI tools.
- Use Zod to validate the `table` parameter.
- Leverage the `SnowflakeService` to send the API request.
- Ensure proper error handling and clear messaging for users.

## Definition of Done

- All acceptance criteria are met
- Unit / integration tests pass
- Lint & type-check succeed
- Documentation (README, Storybook, etc.) is updated
